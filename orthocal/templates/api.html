{% extends "content_base.html" %}

{% block title %}Orthodox Calendar and Readings API{% endblock %}

{% block head %}
	<meta name="description" content="The orthocal.info provides a RESTful API enabling programmatic access to information about feasts, fasts, commemorations, daily scripture readings, and stories from the lives of the saints.">
{% endblock %}

{% block content %}
	<h2>API</h2>
	<p>The api supports Cross-Origin Resource Sharing (CORS).  Information for
	any day of the year can be fetched by including the calendar ('gregorian'
	or 'julian') and date in the url as follows:
	</p>

	<blockquote>
			/api/&lt;calendar&gt;/&lt;year&gt;/&lt;month&gt;/&lt;day&gt;/<br/>
			/api/&lt;calendar&gt;/&lt;year&gt;/&lt;month&gt;/
	</blockquote>

	<p>For example:</p>

	<blockquote><a href="{% url "api:get_calendar_day" cal="gregorian" year=2018 month=2 day=20 %}">{% url "api:get_calendar_day" cal="gregorian" year=2018 month=2 day=20 %}</a></blockquote>

	<p>Though the month view excludes the text of scriptures and the lives of
	the saints due to size and performance, you can fetch information for all
	of February using the following:</p>

	<blockquote><a href="{% url "api:get_calendar_month" cal="gregorian" year=2018 month=2 %}">{% url "api:get_calendar_month" cal="gregorian" year=2018 month=2 %}</a></blockquote>

	<p>To get information for today, simply leave off the date as follows:</p>

	<blockquote><a href="{% url "api:get_calendar_default" cal="gregorian" %}">/api/gregorian/</a></blockquote>

	<p>Set the calendar to 'gregorian' for new calendar and to 'julian' for old
	calendar usage.</p>

	<blockquote><a href="{% url "api:get_calendar_day" cal="julian" year=2018 month=1 day=7 %}">{% url "api:get_calendar_day" cal="julian" year=2018 month=1 day=7 %}</a></blockquote>

	<p>The rubrics are based on OCA rubrics.  For example:</p>

	<h4>Legacy API Endpoints</h4>

	<p>The legacy endpoints (as follows below) using jurisdiction ('oca' or 'rocor') instead of
	calendar are still supported, but new development should take place using
	the names of the calendars instead of the jurisdictions.  </p>

	<blockquote>
			/api/&lt;jurisdiction&gt;/&lt;year&gt;/&lt;month&gt;/&lt;day&gt;/<br/>
			/api/&lt;jurisdiction&gt;/&lt;year&gt;/&lt;month&gt;/
	</blockquote>

	<h3>Javascript Embedding</h3>

	<p>Website administrators can use these apis in conjunction with front-end Javascript to 
	embed the daily readings on the sites they maintain. Backend code can also be used, but that
	beyond the scope of this documentation and is left up to the administrator.</p>

	<p>Following are some simple examples of how to fetch the data from the api and incorporate 
	it into a page.</p>

	<h4>ES6 Example</h4>

	<!-- This is an older example -->
	<!-- <script src="https://gist.github.com/brianglass/24df39824f67a4fda7ff3a6c5f665d9b.js"></script> -->
	<script src="https://gist.github.com/brianglass/4b31f5a98ea3e1a6eae9aff70d71d9e8.js"></script>

	<h4>HTML With jQuery Example</h4>

	<p>A very simple example of how to fetch and display fasting information using jQuery follows.</p>

	<script src="https://gist.github.com/brianglass/8e8f9f4ea9543911198bd6edf74dd77b.js"></script>

	<h4>React.js Example</h4>

	<p>You can view the code for the previous version of this site that was
	built with React.js in the <a
	href="https://github.com/brianglass/orthocal-client">orthocal-client</a> Github repository.<p>
{% endblock %}
